<div class="flex flex-1 flex-row" *ngIf="{activeTab : activeTab | async, 
        totalRecords: totalRecords | async, 
        groupCenturies : groupCenturies | async,
        groupLocations : groupLocations | async,
        groupType : groupTypes | async,
        groupLanguage : groupLanguages | async,
        groupAlphabet : groupAlphabet | async,
        groupMaterial : groupMaterial | async,
        groupObjectTypes : groupObjectTypes | async,
        activeDate : activeDate | async, 
        activeLocation : activeLocation | async,
        activeType : activeType | async,
        activeFile : activeFile | async,
        geoData: geoData | async } as text">

       <!--  
        ,
        
        
        ,
         -->

        <div id="left-bar" class="flex flex-column">
            <p-tabView *ngIf="!text.activeFile" class="normal-tabview"(onChange)="onChangeTabView($event)" >
        
                <p-tabPanel header="Categories" [selected]="text.activeTab != 'search'">
        
                    <ul class="home-menu">
                        <a  (click)="getAllData()" [href]="'/texts'"
                            class="categories no-underline" routerLink="./"  
                            [ngClass]="{'active' : text.activeTab == null}">
                            <li class="pl-4 flex align-items-center">
                                <span class="icon"></span>
                                <span class="route flex-1">All</span>
                            </li>
                        </a>
                        <a *ngFor="let filter of allowedFilters"  [href]="'/texts?filter='+filter"
                            class="categories no-underline" routerLink="./" [queryParams]="{filter : filter}" routerLinkActive="active"
                            [routerLinkActiveOptions]="{exact : false}">
                            <li class="pl-4 flex align-items-center" *ngIf="filter != 'search'">
                                <span class="icon"></span>
                                <span class="route flex-1">{{filter | titlecase}}</span> <!-- (click)="getAllData()" -->
                            </li>
                        </a>
                    </ul>
                </p-tabPanel>
        
                <p-tabPanel class="flex flex-column flex-1" header="Simple search" [selected]="text.activeTab == 'search'">
                    <form id="search-form" class="flex flex-column flex-auto h-full" [formGroup]="searchForm">


                        <p-panel header="Full Text" [toggleable]="false">
                            <div class="flex-column start">
                                <div id="text-radio-button" class="pt-2 p-inputgroup">
                                    <input (focus)="markAsTouched()" id="float-input" type="text"
                                        [placeholder]="!searchForm.get('greekMode')?.value  ? 'Eg: legù' : 'Eg: λεγϋ'"
                                        name="word" formControlName="word" pInputText /> 
                                    
                                </div>
                            
                            </div>
                        </p-panel>

                        <p-panel class="cursor-pointer" header="Title and Id's" [toggleable]="true" [collapsed]="true" [toggler]="'header'">
                            <div class="flex-column start">
                                <div id="text-radio-button" class="pt-2 p-inputgroup">
                                    <input id="float-input" type="text" 
                                        (focus)="markAsTouched()"
                                        placeholder="Enter title..."
                                        formControlName="title" pInputText /> 
                                   
                                </div>

                                <div id="text-radio-button" class="pt-2 p-inputgroup">
                                    <input (focus)="markAsTouched()" id="float-input" type="text"
                                        placeholder="Enter ID..."
                                        formControlName="id" pInputText /> 
                                    
                                </div>

                                <div id="text-radio-button" class="pt-2 p-inputgroup">
                                    <input (focus)="markAsTouched()" id="float-input" type="text"
                                        placeholder="Enter other IDs..."
                                        formControlName="otherId" pInputText /> 
                                    
                                </div>
                               
                            </div>
                        </p-panel>

                        <p-panel class="cursor-pointer" header="Date" [toggleable]="true" [collapsed]="true" [toggler]="'header'">
                            <div class="flex pt-3">
                                <p-checkbox [(ngModel)]="isActiveInterval" [binary]="true" label="Interval" [ngModelOptions]="{standalone: true}"></p-checkbox>
                            </div>
                            <div class="flex pt-3">
                                <p-dropdown (onClear)="clearDates()" appendTo="body" [showClear]="true" class="flex-auto" [options]="(text.groupCenturies) || []" formControlName="dateOfOriginNotBefore"
                                    optionValue="century" optionLabel="label" placeholder="Eg: 6th century BC">
                                    <ng-template let-date pTemplate="item">
                                        <div class="century-item">
                                            <span class="counter">{{date.label}}</span>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>

                            <div class="flex pt-3" *ngIf="isActiveInterval">
                                <p-dropdown [disabled]="searchForm.get('dateOfOriginNotBefore')?.value == null" appendTo="body"  [showClear]="true" class="flex-auto" [options]="(text.groupCenturies) || []" formControlName="dateOfOriginNotAfter"
                                    optionValue="century" optionLabel="label" placeholder="Eg: 6th century BC">
                                    <ng-template let-date pTemplate="item">
                                        <div class="century-item">
                                            <span class="counter">{{date.label}}</span>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>
                        </p-panel>

                        <p-panel class="cursor-pointer" header="Provenance" [toggleable]="true" [collapsed]="true" [toggler]="'header'">

                            <div class="flex pt-3">
                                <p-autoComplete 
                                    [disabled]="!text.geoData"
                                    (onClear)="clearLocation()"
                                    (onSelect)="handleAutocompleteFilter($event)"
                                    [suggestions]="(searchLocations | async) || []" 
                                    (completeMethod)="autocomplete$.next($event)"
                                    styleClass="w-full"
                                    field="modernName"
                                    placeholder="Eg: Samnium"
                                    [showClear]="true">

                                    <ng-template let-item pTemplate="item">
                                        <div>{{item.modernName}}</div>
                                        <sub>{{item.modernUri}}</sub>
                                    </ng-template>
                                </p-autoComplete>
                            </div>
                            

                        </p-panel>


                        <p-panel class="cursor-pointer" header="Language" [toggleable]="true" [collapsed]="true" [toggler]="'header'">
                            
                            <div class="flex pt-3">
                                <p-dropdown appendTo="body" [showClear]="true" class="flex-auto" [options]="(text.groupLanguage) || []" formControlName="language"
                                    optionValue="language" optionLabel="language" placeholder="Select language...">
                                    <ng-template let-item pTemplate="item">
                                        <div class="language-item">
                                            <span class="counter">{{item.language | labelMapping}}</span>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>

            
                        </p-panel>

                        <p-panel class="cursor-pointer" header="Alphabet" [toggleable]="true" [collapsed]="true" [toggler]="'header'">
                            
                            <div class="flex pt-3">
                                <p-dropdown appendTo="body" [showClear]="true" class="flex-auto" [options]="(text.groupAlphabet) || []" formControlName="alphabet"
                                    optionValue="alphabet" optionLabel="alphabet" placeholder="Select language...">
                                    <ng-template let-item pTemplate="item">
                                        <div class="language-item">
                                            <span class="counter">{{item.alphabet}}</span>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>

            
                        </p-panel>

                        <p-panel class="cursor-pointer" header="Inscription Types" [toggleable]="true" [collapsed]="true" [toggler]="'header'">
                            <div class="flex pt-3">
                                <p-dropdown appendTo="body" [showClear]="true" class="flex-auto" [options]="(text.groupType) || []" formControlName="inscriptionType"
                                    optionValue="inscriptionType" optionLabel="inscriptionType" placeholder="Select inscription type...">
                                    <ng-template let-inscriptionType pTemplate="item">
                                        <div class="language-item">
                                            <span class="counter">{{inscriptionType.inscriptionType}}</span>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>

            
                        </p-panel>


                        <p-panel class="cursor-pointer" header="Object Types" [toggleable]="true" [collapsed]="true" [toggler]="'header'">
                            
                            <div class="flex pt-3">
                                <p-dropdown [appendTo]="'body'" [showClear]="true" class="flex-auto" [options]="(text.groupObjectTypes) || []" formControlName="objectType"
                                    optionValue="objectType" optionLabel="objectType" placeholder="Select object type...">
                                    <ng-template let-objectType pTemplate="item">
                                        <div class="language-item">
                                            <span class="counter">{{objectType.objectType}}</span>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>

            
                        </p-panel>

                        <p-panel class="cursor-pointer" header="Materials" [toggleable]="true" [collapsed]="true" [toggler]="'header'">
                            
                            <div class="flex pt-3">
                                <p-dropdown appendTo="body" [showClear]="true" class="flex-auto" [options]="(text.groupMaterial) || []" formControlName="material"
                                    optionValue="material" optionLabel="material" placeholder="Select material...">
                                    <ng-template let-materials pTemplate="item">
                                        <div class="language-item">
                                            <span class="counter">{{materials.material}}</span>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>

            
                        </p-panel>


                        

    
                    </form>
                   
                </p-tabPanel>
                <div class="flex pt-3 mb-0 mt-auto search-button-div sticky bottom-0" *ngIf="activeIndex == 1">
                    <button pButton 
                        (click)="resetFields()"
                        type="button"
                        label="Reset fields" 
                        class="p-button-danger border-noround flex-1"
                        icon="fa-solid fa-times" 
                        iconPos="left">
                    </button>
                    <!-- <button pButton 
                            type="submit"
                            label="Search" 
                            class="p-button-secondary border-noround flex-1"
                            icon="fa-solid fa-search" 
                            iconPos="right">
                    </button> -->
                </div>
            </p-tabView>
            
            <ul class="home-menu" *ngIf="fileNotAvailable">
                <li>
                    <a href="'/texts?filter=all'"
                        class="categories no-underline" routerLink="/texts" [queryParams]="{filter : 'all'}" routerLinkActive="active"
                        [routerLinkActiveOptions]="{exact : false}">
                        <li class="pl-4 flex align-items-center">
                            <span class="icon"></span>
                            <span class="route flex-1">Go to text list</span>
                        </li>
                    </a>
                </li>
            </ul>

            <ul class="home-menu" *ngIf="text.activeFile && !fileNotAvailable">
        
                <li>
                    <a  class="categories no-underline">
                        <li class="pl-4 flex align-items-center" (click)="showModal()">
                            <span class="icon"></span>
                            <span class="route flex-1">Show XML</span>
    
                           
                        </li>
    
                        <p-dialog [appendTo]="'body'" [autoZIndex]="true" [header]="text.activeFile" [(visible)]="displayModal" [modal]="true" [style]="{width: '80vw'}"
                                 [draggable]="false" [resizable]="false" (onHide)="hideModal()">
    
                                 <pre><code [highlight]="code" [lang]="'xml'" *ngIf="code != ''"></code></pre>
                                 <span *ngIf="code == ''">Loading...</span>
                        </p-dialog>
                    </a>
                </li>
                
                <li>
                    <a  class="categories no-underline">
                        <li class="pl-4 flex align-items-center" (click)="printDocument()">
                            <span class="icon"></span>
                            <span class="route flex-1">Print/Save PDF</span>
                        </li>
                    </a>
                </li>
                

                <!-- SHOW HIDE RESTORATIONS -->
                <li>
                    <a  class="categories no-underline" (click)="showHideRestorations()">
                        <li class="pl-4 flex align-items-center">
                            <span class="icon"></span>
                            <span class="route flex-1">Show/Hide restorations</span>
                        </li>
                    </a>
                </li>
                
                <li *ngIf="{data : getGetoDataFromFileId | async} as fileMap">
                    <div class="relative mt-5 mb-3" style="width: 100%;">
                        <div class="w-full overlaySpinner" *ngIf="mapsLoading">
                            <p-progressSpinner class="flex flex-1"></p-progressSpinner>
                
                        </div>
                        <span [hidden]="!mapsLoading" class="route flex-1">Loading map data:</span>
                        <span [hidden]="mapsLoading" class="route flex-1">Map data:</span>
                        <div id="singleMap" style="height: 300px;">

                        </div>
                    </div>
                </li>

            </ul>
        
        </div>
        
        <div id="texts-container" class="flex flex-column flex-1">
            
            <!-- TEXT FILTER ALL -->
            <div id="filter-texts-container" class="flex flex-column text-container-top" *ngIf="(text.activeTab == null || text.activeTab == 'search') && !text.activeFile">
                <div class="flex flex-row align-items-center horizontal-list m-3 text-center">
                    <h2 class="flex-1 loading" *ngIf="!text.totalRecords && !somethingWrong && text.totalRecords != 0">Loading <span>.</span><span>.</span><span>.</span>
                    </h2>
                    <h2 class="flex-1" *ngIf="somethingWrong">Ops!</h2>
                    <h2 class="flex-1" *ngIf="text.totalRecords || text.totalRecords == 0 && !somethingWrong"><span class="red">{{text.totalRecords}} </span>texts found
                    </h2>
                </div>
        
        
            </div>
        
            
            <!-- TEXT FILTER DATE -->
            <div id="filter-date-container" class="flex flex-column text-container-top" *ngIf="text.activeTab == 'date'">
                <div class="flex flex-row horizontal-list m-3 text-container-top">
                    <h2 class="loading text-center flex-1 flex align-items-center justify-content-center"
                        *ngIf="!text.groupCenturies">Loading <span>.</span><span>.</span><span>.</span></h2>
        
                    <ul class="flex-wrap align-items-center" *ngIf="text.groupCenturies">
        
                        <li *ngFor="let item of text.groupCenturies" [class.active]="text.activeDate == item.century"
                            (click)="filterByDate(item.century)"
                            class="my-2 mr-2 align-items-center border-round-2xl century-list-element" routerLink="./"
                            [queryParams]="{filter: 'date', date: item.century}">
                            <p-badge class="p-2 pr-0" value="{{item.count}}"></p-badge>
                            <a class="no-underline font-bold">{{item.century | centuryPipe}}</a>
                        </li>
        
        
                    </ul>
                </div>
            </div>
            

            <!-- TEXT FILTER LOCATION -->
            <div id="filter-location-container" class="flex flex-column" *ngIf="text.activeTab == 'location'" 
                (mousedown)="onMouseDown($event)" 
                (mousemove)="onMouseMove($event)" 
                (mouseup)="onMouseUp()"
                [ngClass]="{'dragging': isDragging}">
        
                <div class="flex flex-row horizontal-list resizer m-3 text-container-top justify-content-between">
        
                    <h2 class="loading text-center flex-1 flex align-items-center justify-content-center"
                        *ngIf="!text.geoData">Loading <span>.</span><span>.</span><span>.</span>
                    </h2>
                    <ul class="flex-wrap align-items-center" *ngIf="text.geoData">
                        <li *ngFor="let item of text.geoData"
                            class="my-2 mr-2 align-items-center border-round-2xl century-list-element" routerLink="./"
                            [class.active]="(text.activeLocation == item.modernId)"
                            [queryParams]="{filter: 'location', place: item.modernId}">
                           <!--  <p-badge class="p-2 pr-0" value="{{item.count}}"></p-badge> -->
                            <a class="no-underline font-bold">{{item.modernName}}</a>
        
                        </li>
                    </ul>

                    <div class="flex align-items-center map-button">
                        <button (click)="overlayGeneralMap.toggle($event)" pButton type="button" class="p-button-secondary mr-2"
                            icon="fa-solid fa-map-location-dot" iconPos="left"></button>
        
                        <p-overlayPanel #overlayGeneralMap [appendTo]="'body'">
                            <ng-template pTemplate>
                                <div class="relative mb-3" style="width: 800px;">
                                    <div style="height: 600px;" leaflet [leafletOptions]="leafletMapOptions" [leafletLayers]="layers"
                                        [leafletMaxBounds]="bounds">
                                    </div>
                                </div>
                            </ng-template>
                        </p-overlayPanel>
                    </div>
                </div>
        
            </div>


            <!-- TEXTS FILTER BY TYPE -->
            <div id="filter-type-container" class="flex flex-column text-container-top" *ngIf="text.activeTab == 'type'">
                <div class="flex flex-row horizontal-list m-3 text-container-top">
                    <h2 class="loading text-center flex-1 flex align-items-center justify-content-center"
                        *ngIf="!text.groupType">Loading <span>.</span><span>.</span><span>.</span></h2>
        
                    <ul class="flex-wrap align-items-center" *ngIf="text.groupType">
        
                        <li *ngFor="let item of text.groupType" [class.active]="text.activeType == item"
                            (click)="filterByType(item)"
                            class="my-2 mr-2 align-items-center border-round-2xl type-list-element" routerLink="./"
                            [queryParams]="{filter: 'type', type: item | urlDecoder}">
                            <!-- <p-badge class="p-2 pr-0" value="{{item.count}}"></p-badge> -->
                            <a class="no-underline font-bold">{{item.inscriptionType}}</a>
                        </li>
        
        
                    </ul>
                </div>
            </div>
        
            <!-- TEXTS LIST -->
            <div class="flex flex-row flex-wrap ml-5 flex-auto text-item-container" *ngIf="(text.totalRecords != 0 && !somethingWrong) && !text.activeFile">
                <div class="flex flex-row m-2 w-full" *ngIf="showSpinner || !(paginationItems | async)">
                    <p-progressSpinner class="flex flex-1"></p-progressSpinner>
        
                </div>
                
                <a class="flex no-underline text-item m-2" *ngFor="let item of paginationItems | async"
                    [href]="'/text?file='+item.itAnt_ID" routerLink="./" [queryParams]="{file: item.itAnt_ID}">

                    <div class="flex flex-row  ">
                        <div class="flex text-item-id p-2">
                            {{item.trismegistos.trismegistosID}}
                        </div>
        
                        <div class="flex flex-column text-item-preview p-2">
        
                            <div class="text-item-preview-top">
                                {{item.itAnt_ID}}
                            </div>
        
                            <div class="text-item-preview-bottom flex flex-column mt-3">
                                <div class="flex flex-row align-items-baseline">
                                    <i class="far fa-calendar-alt"></i>
                                    <span class="ml-2">{{item.dateOfOrigin}}</span>
                                </div>
                                <div class="flex flex-row align-items-baseline mt-2">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span class="ml-2">{{item.originalPlace.modernName}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
        
            </div>


            <!-- TEXT VIEW -->
            <div class="flex flex-row flex-wrap flex-auto text-item-container" *ngIf="((text.totalRecords != 0 && !somethingWrong && !fileNotAvailable) && text.activeFile) 
                                                                                        && {file : getFileById | async,
                                                                                            inscriptionType : getInscriptionType | async } as textView"> 
                
                <div class="flex flex-column flex-auto ">
                    <div [ngClass]="{'zIndex': text.activeFile}" class="flex flex-row horizontal-list m-3 text-container-top sticky top-0">
                        
                        
                        <!-- <p-paginator *ngIf="(text.totalRecords != 0 && !somethingWrong)"
                            id="text-view-paginator"
                            [dropdownAppendTo]="'body'" [first]="(textView.index) || 0" [rows]="1"
                            [totalRecords]="(text.totalRecords) || 0"
                            (onPageChange)="textPagination($event)"
                            [showJumpToPageDropdown]="false" 
                            [showPageLinks]="false">
                    
                        </p-paginator> -->

                        <div id="text-view-id" class="select-none absolute h-full flex justify-content-center align-items-center">
                            
                            <div *ngIf="!textView.file">
                                <i class="fas fa-spinner fa-pulse"></i>
                            </div>
                            <div class="flex flex-column align-items-center" *ngIf="textView.file">
                                <h2 class="font-bold">{{textView.file?.itAnt_ID}}</h2>
                                <h3 class="font-italic font-normal">{{textView.file.inscriptionTitle != '' ? textView.file.inscriptionTitle : textView.file.title}}</h3>
                            </div>
                        </div>

                        
                    </div>         
                    
                    
                    <div class="main-section flex flex-column p-3 m-3" *ngIf="textView.file">

                       

                        <div id="facsimile-div" class="flex flex-column flex-auto pt-3" *ngIf="{facsimile : getFacsimile | async, customFacsimile : getCustomFacsimile | async} as images">
                           
                            <div id="facsimile-div-panel" *ngIf="!loadingFacsimile && images.facsimile" class="flex ml-3 pt-3 justify-content-center"> 
                            
                                <div class="flex flex-column align-items-center pl-2" *ngFor="let img of images.facsimile">
                                    <p-image *ngIf="!img.isPdf && !img.isExternalRef" [src]="img.url" alt="Image" width="250" [preview]="true"></p-image>
                                    <span [innerHTML]="images.customFacsimile" class="p-5 text-center" *ngIf="!img.isPdf && !img.isExternalRef"></span>
                                </div>
                                
                                 
                            </div>

        
                            <div class="flex flex-row m-2 w-full" *ngIf="loadingFacsimile">
                                
                                <p-progressSpinner class="flex flex-1"></p-progressSpinner>
                    
                            </div>
                        </div> 

                        <div class="flex justify-content-start" *ngIf="externalReferences && externalReferences.length > 0">
                            <p-splitButton pTooltip="Other images" tooltipPosition="left" [appendTo]="'body'" label="Normal" styleClass="p-button-rounded p-button-sm p-button-danger bg-primary" [model]="externalReferences">
                                <ng-template pTemplate="content">
                                    <i class="fa-solid fa-arrow-up-right-from-square"></i>

                                    <span class="pl-3">External images</span>
                                </ng-template>
                            </p-splitButton>
                        </div>

                        <div id="text-data-div" class="flex flex-column flex-auto pt-3">
                            <div id="text-data-div-title" class="flex flex-row">
                                <h2 class="font-medium">Text Data</h2>
                                
                            </div>


                            <div  class="flex grid data-list  pt-3 ">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">IDs:</span>
                                </div>
                                <div class="flex flex-column col-9">
                                    <div class="flex flex-row pl-2" *ngIf="textView.file.trismegistos">
                                        <a [href]="'//'+textView.file.trismegistos.trismegistosID_url" target="_blank" class="font-bold text-red-800">{{textView.file.trismegistos.trismegistosID}}</a>
                                    </div>
                                    <div class="flex flex-column">

                                    </div>
                                    <div class="flex flex-column" *ngIf="isTraditionalIdArray">
                                        <div class="flex flex-column">
                                            <a class="font-bold text-red-800 pl-2" *ngFor="let traditionalIDs of textView.file.traditionalIDs" [href]="traditionalIDs.traditionalID_URL" target="_blank">{{traditionalIDs.traditionalID}}</a>
                                        </div>
                                        
                                        
                                    </div>

                                    <div class="flex flex-column" *ngIf="!isTraditionalIdArray">
                                        <div class="flex flex-column">
                                            <a class="font-bold text-red-800 pl-2" [href]="textView.file.traditionalIDs.traditionalID_URL" target="_blank">{{textView.file.traditionalIDs.traditionalID}}</a>
                                        </div>
                                        
                                        
                                    </div>
                                </div>
                            </div>

                            <div class="flex grid data-list pt-3" *ngIf="textView.file.language != undefined && textView.file.language.length != 0">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Language:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column" *ngIf="textView.file.language.length > 0">

                                        <div class="flex flex-column">
                                            <a class="font-bold text-red-800 "  [href]="textView.file.language[0].source" target="_blank">{{textView.file.language[0].ident | labelMapping}}</a> <!-- *ngFor="let lang of textView.file.language" -->

                                        </div>
                                        
                                    </div>

                                    <div class="flex flex-column" *ngIf="textView.file.language.length == 0">

                                        <div class="flex flex-column">
                                            <span class="font-italic " >No info</span>

                                        </div>
                                        
                                    </div>
                                </div>
                            </div>


                            <div class="flex grid data-list">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Alphabet:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column" *ngIf="textView.file.writingSystem != undefined">

                                        <div class="flex flex-column">
                                            <a class="font-bold text-red-800 " [href]="textView.file.alphabet_url" target="_blank">{{textView.file.writingSystem}}</a>

                                        </div>
                                        
                                    </div>

                                    <div class="flex flex-column" *ngIf="textView.file.alphabet == undefined">

                                        <div class="flex flex-column">
                                            <span class="font-italic " >No info</span>

                                        </div>
                                        
                                    </div>
                                </div>
                            </div>

                            <div class="flex grid data-list"  *ngIf="textView.file.wordDivisionType && textView.file.wordDivisionType != ''">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Word division type:</span>
                                </div>
                                <div class="flex flex-row col-9">
                                    <span class="font-normal" *ngIf="textView.file.wordDivisionType">{{textView.file.wordDivisionType}}</span>
                                    <span class="font-italic" *ngIf="textView.file.wordDivisionType == undefined">No info</span>
                                    
                                </div>
                            </div>
                            
                            <div class="flex grid data-list" *ngIf="textView.inscriptionType != undefined && textView.inscriptionType != ''">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Inscription type:</span>
                                </div>
                                <div class="flex flex-row col-9">
                                    <a class="font-bold text-red-800 " [href]="textView.inscriptionType.url" target="_blank">{{textView.inscriptionType.term}}</a>
                                    <!-- <span class="font-normal" *ngIf="textView.inscriptionType">{{textView.inscriptionType}}</span> -->
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Ductus:</span>
                                </div>
                                <div class="flex flex-column col-9" *ngIf="textView.file.bodytextpart && isBodyTextPartArray">

                                    <div class="flex flex-column mb-3" *ngFor="let ductus of textView.file.bodytextpart">
                                        <div>
                                            <!-- <span class="font-bold text-red-800 ">Ductus:</span>  --><span class="font-normal ">{{ductus.ductus}}</span>
                                        </div>
                                        <div>
                                            <!-- <span class="font-bold text-red-800 ">Section:</span> --> <span class="font-normal ">{{ductus.section}}</span>
                                        </div>
                                      

                                    </div>
                                    
                                </div>

                                <div class="flex flex-column col-9" *ngIf="textView.file.bodytextpart && !isBodyTextPartArray">

                                    <div>
                                        <span class="font-normal ">{{textView.file.bodytextpart.ductus}}</span>
                                    </div>
                                    
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Execution:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column" *ngIf="textView.file.execution != undefined">

                                        <div class="flex flex-column">
                                            <a class="font-bold text-red-800 " [href]="textView.file.execution_conceptUrl" target="_blank">{{textView.file.execution}}</a>

                                        </div>
                                        
                                    </div>

                                    <div class="flex flex-column" *ngIf="textView.file.execution == undefined">

                                        <div class="flex flex-column">
                                            <span class="font-italic " >No info</span>

                                        </div>
                                        
                                    </div>
                                </div>
                            </div>

                            <div class="flex grid data-list align-items-baseline">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold">Date:</span>
                                </div>
                                <div class="flex flex-row col-9">
                                    <span class="font-italic mr-2" *ngIf="textView.file.datingCertainty == 'medium'">approx. </span>
                                    <span class="font-normal">{{textView.file.dateOfOrigin != undefined ? textView.file.dateOfOrigin : 'No info'}}</span>
                                    
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Opistography:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <span class="font-normal" *ngIf="textView.file.opistography">{{textView.file.opistography}}</span>
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Reuse:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <span class="font-normal" *ngIf="textView.file.reuse">{{textView.file.reuse}}</span>
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Summary:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <span class="font-normal" *ngIf="textView.file.summary">{{textView.file.summary}}</span>
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list pt-3" *ngIf="autopsyAuthors.length > 0">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Text autopsied:</span>
                                </div>
                                <div class="flex flex-column col-9">
                                    <div class="flex flex-column mb-3" *ngFor="let autopsy of autopsyAuthors">
                                        <div>
                                            <span class="font-bold text-red-800 ">{{autopsy.name}}</span> <span class="font-normal " *ngIf="autopsy.when != null">{{autopsy.when}} <span *ngIf="autopsy.notAfter">- not after {{autopsy.notAfter}}</span></span>
                                        </div>                        
                                    </div>
                                </div>
                                
                            </div>

                            <div class="flex grid data-list" *ngIf="seenAuthors.length > 0">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Seen:</span>
                                </div>
                                <div class="flex flex-column col-9">
                                    <div class="flex flex-column mb-3" *ngFor="let seen of seenAuthors">
                                        <div>
                                            <span class="font-bold text-red-800 ">{{seen.name}}</span>: <span class="font-normal ">{{seen.when}} <span *ngIf="seen.notAfter">- not after {{seen.notAfter}}</span></span>
                                        </div>                        
                                    </div>
                                </div>
                                
                            </div>
                            
                        </div> 
                       

                        <!-- TEXT -->

                        <div id="edition-div" class="flex flex-column flex-auto pt-3" *ngIf="{raw : getXMLContent | async } as xml">
                            <div id="edition-div-title" class="flex flex-row">
                                <h2 class="font-medium">Text</h2>
                                
                            </div>

                            <div id="edition-div-panel" class="flex data-list  pt-3" *ngIf="{interpretative: getInterpretativeContent | async,
                                                                                             diplomatic : getDiplomaticContent | async,
                                                                                             annotations: getAnnotations | async,
                                                                                             apparatus : getApparatus | async} as leiden"> 
                                <p-tabView class="w-full" styleClass="text-panel" [hidden]="loadingInterpretative || loadingDiplomatic">
                                    <p-tabPanel header="Intepretative">
                                        <div class="flex">
                                            <div class="flex flex-row m-2 w-full" *ngIf="loadingInterpretative && loadingDiplomatic">
                                                <p-progressSpinner class="flex flex-1"></p-progressSpinner>
                                    
                                            </div>
                                            <!-- <div class="w-6" #interpretativeText id="interpretative-text" [hidden]="loadingInterpretative" [innerHTML]="leiden.interpretative | noSanitize " >
                                                
                                            </div> -->

                                            <div #interpretativeText id="interpretative-text" class="flex-column" class="mb-3 mr-3" *ngFor="let face of leiden.interpretative; let i = index">
                                                <h4 class="mb-2" *ngIf="leiden.interpretative && leiden.interpretative.length > 1">  Face_{{getChar(i)}}
                                                </h4>
                                                <p [innerHTML]="face | noSanitize"></p>
                                            </div>
    
                                            <div class="w-6 referencedCommentary ml-3 " [hidden]="!referencedCommentary || referencedCommentary.length == 0">
                                                <p class="pb-3" *ngFor="let reference of referencedCommentary" [innerHTML]="reference | noSanitize"></p>
                                            </div>
                                            <div #dynamicOverlay></div>
                                        </div>
                                        
                                    </p-tabPanel>
                                    <p-tabPanel header="Diplomatic" *ngIf="!isOscan && !isFaliscan">
                                        <div #diplomaticText id="diplomatic-text" [hidden]="loadingDiplomatic">
                                            <div class="mb-3" *ngFor="let face of leiden.diplomatic; let i = index">
                                                <h4 class="mb-2" *ngIf="leiden.diplomatic && leiden.diplomatic.length > 1">  Face_{{getChar(i)}}
                                                </h4>
                                                <p [innerHTML]="face | noSanitize"></p>
                                            </div>
                                        </div>
                                    </p-tabPanel>

                                    <p-tabPanel header="Apparatus" *ngIf="leiden.apparatus && leiden.apparatus.length != 0">
                                        <div #apparatusText id="apparatus-text" class="flex flex-column" [hidden]="loadingApparatus" >
                                            <p *ngFor="let app of leiden.apparatus">
                                                <span [innerHTML]="app"></span>
                                            </p>
                                        </div>

                                        <!-- {{leiden.apparatus | json}} -->
                                        
                                    </p-tabPanel>
    
                                </p-tabView>                              
                                 
                                <div class="grid  print-version">
                                    
                                    <!-- <div class="col-6 font-light" >
                                        Interpretative
                                        <div [innerHTML]="leiden.interpretative | noSanitize" ></div>

                                    </div> -->

                                    
                                    <!-- <div class="col-6 font-light">
                                        Diplomatic
                                        <div [innerHTML]="leiden.diplomatic | noSanitize" ></div>

                                    </div> -->

                                    <div class="col-6 font-light">
                                        Apparatus
                                        <div [innerHTML]="leiden.apparatus" ></div>

                                    </div>
                            
                                </div>
                                
                            </div>
                            <div class="flex flex-row m-2 w-full" *ngIf="loadingInterpretative || loadingDiplomatic">
                                <p-progressSpinner class="flex flex-1"></p-progressSpinner>
                    
                            </div>
                        </div> 
                        
                        
                        <div id="translation-div" class="flex flex-column flex-auto pt-3">
                            <div id="translation-div-title" class="flex flex-row">
                                <h2 class="font-medium">Translation</h2>
                                
                            </div>

                            <div id="translation-div-panel" class="flex data-list" *ngIf="{data: getTranslation | async } as translation"> 

                                <!-- {{translation.data | json}} -->
                                <div *ngIf="!loadingTranslation">

                                    <div class="grid m-3" *ngIf="translation.data.length > 0">
                                        <div class="col-12 lg:col-6 font-light" *ngFor="let trans of translation.data" [innerHTML]="trans">
    
                                        </div>
                                
                                    </div>
    
                                    <div class="font-italic font-light m-3" *ngIf="translation.data.length == 0">
                                        No translation
                                    </div>
                                </div>
                                
                            </div>
                            <div class="flex flex-row m-2 w-full" *ngIf="loadingTranslation">
                                <p-progressSpinner class="flex flex-1"></p-progressSpinner>
                    
                            </div>
                        </div> 

                                        

                         <!-- SUPPORT -->

                        <div id="text-data-div" class="flex flex-column flex-auto pt-3">
                            <div id="text-data-div-title" class="flex flex-row">
                                <h2 class="font-medium">Support</h2>
                                
                            </div>

                            <div class="flex grid data-list pt-3" *ngIf="textView.file.support.objectType != undefined">

                                <div class="flex col-3 justify-content-end" >
                                    <span class="font-bold text-right">Object type:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column">
                                        <a class="font-bold text-red-800 " [href]="textView.file.support.objectType_conceptUrl" target="_blank">{{textView.file.support.objectType}}</a>

                                    </div>
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list" *ngIf="textView.file.support.material != undefined">

                                <div class="flex col-3 justify-content-end" >
                                    <span class="font-bold ">Material:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column">
                                        <a class="font-bold text-red-800 " [href]="textView.file.support.material_conceptUrl" target="_blank">{{textView.file.support.material}}</a>

                                    </div>
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list" *ngIf="textView.file.dimensions != undefined && textView.file.dimensions.width != ''">
                                <div class="flex col-3 justify-content-end" >
                                    <span class="font-bold text-right">Dimensions:</span>
                                </div>
                                <div class="flex flex-column col-9">

                                    <div  *ngIf="textView.file.dimensions.width != ''">
                                        <span class="font-bold ">Width:</span> 
                                        <span class="font-normal pl-3">{{textView.file.dimensions.width}} cm</span>
                                    </div>
                                    <div *ngIf="textView.file.dimensions.height != ''">
                                        <span class="font-bold " >Height:</span> 
                                        <span class="font-normal pl-3">{{textView.file.dimensions.height}} cm</span>
                                    </div>
                                    <div *ngIf="textView.file.dimensions.depth != ''">
                                        <span class="font-bold " >Depth:</span> 
                                        <span class="font-normal pl-3">{{textView.file.dimensions.depth}} cm</span>
                                    </div>
                                </div>
                            </div>

                            <div class="flex grid data-list" *ngIf="textView.file.layoutNotes != undefined && textView.file.layoutNotes != ''">

                                <div class="flex col-3 justify-content-end" >
                                    <span class="font-bold text-right">Layout notes:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column">
                                        <span class="font-normal" *ngIf="textView.file.layoutNotes != ''">{{textView.file.layoutNotes}}</span>
                                        <span class="font-italic" *ngIf="textView.file.layoutNotes == ''">No info</span>

                                    </div>
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list" *ngIf="textView.file.palaeographicNotes != undefined && textView.file.palaeographicNotes != ''">
                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Palaeographic notes:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <span class="font-normal" *ngIf="textView.file.palaeographicNotes">{{textView.file.palaeographicNotes}}</span>
                                    <span class="font-italic" *ngIf="textView.file.palaeographicNotes == undefined">No info</span>
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list" *ngIf="textView.file.condition != undefined && textView.file.condition != ''">

                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Condition:</span>
                                </div>
                                <div class="flex flex-column col-9">

                                    <div class="flex flex-column">
                                        <span class="font-normal" *ngIf="textView.file.condition != ''">{{textView.file.condition}}</span>
                                        <span class="font-italic" *ngIf="textView.file.condition == ''">No info</span>

                                    </div>

                                    <div class="flex flex-column" *ngIf="textView.file.conditionDesc != undefined && textView.file.conditionDesc != '' ">
                                        <span class="font-normal" *ngIf="textView.file.conditionDesc != ''">{{textView.file.conditionDesc}}</span>
                                        <span class="font-italic" *ngIf="textView.file.conditionDesc == ''">No info</span>

                                    </div>
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list" *ngIf="textView.file.decoration != undefined && textView.file.decoration != ''">

                                <div class="flex col-3 justify-content-end" >
                                    <span class="font-bold text-right">Decoration:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column">
                                        <span class="font-normal" *ngIf="textView.file.decoration != ''">{{textView.file.decoration}}</span>
                                        <span class="font-italic" *ngIf="textView.file.decoration == ''">No info</span>

                                    </div>
                                    
                                </div>
                            </div>
                            
                        </div> 

                        <!-- ORIGIN AND CONSERVATION -->


                        <div id="text-data-div" class="flex flex-column flex-auto pt-3">
                            <div id="text-data-div-title" class="flex flex-row">
                                <h2 class="font-medium">Origin and Conservation</h2>
                                
                            </div>

                            <!-- <div class="flex grid data-list pt-3" *ngIf="textView.file.originalPlace.ancientName != undefined || textView.file.originalPlace.ancientName != ''">

                                <div class="flex col-3 justify-content-end" *ngIf="textView.file.originalPlace.ancientName != ''">
                                    <span class="font-bold text-right">Ancient find spot name:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column">
                                        <a class="font-bold text-red-800 " [href]="textView.file.originalPlace.ancientNameUrl" target="_blank">{{textView.file.originalPlace.ancientName}}</a>

                                    </div>
                                    
                                </div>
                            </div> -->

                            <div class="flex grid data-list pt-3" *ngIf="textView.file.originalPlace.modernName != undefined || textView.file.originalPlace.modernName != ''">

                                <div class="flex col-3 justify-content-end" *ngIf="textView.file.originalPlace.modernName != ''">
                                    <span class="font-bold text-right">Modern find spot name:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column">
                                        <a class="font-bold text-red-800 " [href]="textView.file.originalPlace.modernNameUrl" target="_blank">{{textView.file.originalPlace.modernName}}</a>
                                        <span *ngIf="textView.file.detailedFindSpot">{{textView.file.detailedFindSpot}}</span>
                                    </div>
                                    
                                </div>
                            </div>


                            <div class="flex grid data-list pt-3" *ngIf="textView.file.discoveryYear != undefined">

                                <div class="flex col-3 justify-content-end">
                                    <span class="font-bold text-right">Discovery year:</span>
                                </div>
                                <div class="flex flex-column col-9">

                                    <div>
                                        <span class="font-bold text-red-800 " *ngIf="textView.file.discoveryYear.when != '' && textView.file.discoveryYear.notAfter != ''">When:</span> <span class="font-normal ">{{textView.file.discoveryYear.when}}</span>
                                    </div>
                                    <div>
                                        <span class="font-bold " *ngIf="textView.file.discoveryYear.notAfter != ''">Not after:</span> <span class="font-normal ">{{textView.file.discoveryYear.notAfter}}</span>
                                    </div>
                                    <div>
                                        <span class="font-bold " *ngIf="textView.file.discoveryYear.notBefore != ''">Not before:</span> <span class="font-normal ">{{textView.file.discoveryYear.notBefore}}</span>
                                    </div>
                                </div>
                            </div>


                            <div class="flex grid data-list pt-3" *ngIf="textView.file.settlement.placeOfConservation != undefined && textView.file.settlement.placeOfConservation != ''">

                                <div class="flex col-3 justify-content-end" *ngIf="textView.file.settlement.placeOfConservation != ''">
                                    <span class="font-bold text-right">Last known place of conservation:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column">
                                        <a class="font-bold text-red-800 " [href]="textView.file.settlement.placeOfConservationExternalReference" target="_blank">{{textView.file.settlement.placeOfConservation}}</a>

                                    </div>
                                    
                                </div>
                            </div>


                            <div class="flex grid data-list pt-3" *ngIf="textView.file.conservationInstitution != undefined">

                                <div class="flex col-3 justify-content-end" *ngIf="textView.file.conservationInstitution.name != ''">
                                    <span class="font-bold text-right">Conservation institution:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column">
                                        <a class="font-bold text-red-800 " [href]="textView.file.conservationInstitution.URL" target="_blank">{{textView.file.conservationInstitution.name}}</a>

                                    </div>
                                    
                                </div>
                            </div>

                            <div class="flex grid data-list" *ngIf="textView.file.inventoryNumber != undefined && textView.file.inventoryNumber != ''">

                                <div class="flex col-3 justify-content-end" >
                                    <span class="font-bold text-right">Inventory number:</span>
                                </div>
                                <div class="flex flex-row col-9">

                                    <div class="flex flex-column">
                                        <span class="font-normal" *ngIf="textView.file.inventoryNumber != ''">{{textView.file.inventoryNumber}}</span>
                                        <span class="font-italic" *ngIf="textView.file.inventoryNumber == ''">No info</span>

                                    </div>
                                    
                                </div>
                            </div>
                        </div> 

                        <div id="commentary-div" class="flex flex-column flex-auto pt-3" *ngIf="{data : getCommentary | async } as commentary">
                            <div id="commentary-div-title" class="flex flex-row">
                                <h2 class="font-medium">Commentary</h2>
                                
                            </div>
                            <div id="commentary-div-panel" *ngIf="!loadingCommentary" class="flex ml-3 pt-3 justify-content-center"> 
                            
                                <div class="flex flex-column align-items-baseline pl-2" *ngIf="onlyTextCommentary && onlyTextCommentary.length > 0">
                                   
                                    <p class="font-normal pb-3" *ngFor="let note of onlyTextCommentary" [innerHTML]="note | noSanitize"></p>
                                </div>

                                <div class="flex flex-column align-items-baseline pl-2" *ngIf="onlyTextCommentary && onlyTextCommentary.length == 0">
                                   
                                    <p class="font-italic font-light pb-3">No info</p>
                                </div>
                                 
                            </div>
                            <div class="flex flex-row m-2 w-full" *ngIf="loadingCommentary">
                                <p-progressSpinner class="flex flex-1"></p-progressSpinner>
                    
                            </div>
                        </div>


                        <!-- BIBLIOGRAPHY -->


                        <div id="bibliography-div" class="flex flex-column flex-auto pt-3" *ngIf="{books : getBibliography | async } as bibliography">
                            <div id="bibliography-div-title" class="flex flex-row">
                                <h2 class="font-medium">Bibliography</h2>
                                
                            </div>
                            <div id="bibliography-div-panel" *ngIf="!loadingBibliography" class="flex flex-column ml-3 pt-3"> 
                                
                                <div class="flex flex-row align-items-baseline book-element mr-auto" *ngFor="let book of bibliography.books">

                                    

                                    <i class="fa-solid fa-circle fa-2xs"></i>

                                    <a class="ml-3 no-underline" [href]="book.url" target="_blank">
                                        <!-- <span>{{book.type}}</span> -->

                                        <span *ngIf="book.type == 'book'">
                                            
                                            <span class="font-normal text-red-800 text-900 " *ngIf="book.author != undefined">{{book.author.surname}} {{book.author.name}}</span>
                                            <span class="font-normal text-900 text-red-800 " *ngIf="book.editor != undefined && book.author == undefined">{{book.editor.surname}} {{book.editor.name}}</span>,
                                            
                                            <span class="font-italic text-900" *ngIf="book.title != undefined && book.title != ''">{{book.title}}</span>,
                                            <span class="font-normal text-900 " *ngIf="book.publisher != undefined && book.publisher != ''">{{book.publisher}}</span>,
                                            <span class="font-normal text-900 " *ngIf="book.date != undefined && book.date != ''">{{book.date}}</span>

                                        </span>

                                        <span *ngIf="book.type == 'bookSection'">
                                            
                                            <span class="font-normal text-red-800 text-900 " *ngIf="book.author != undefined">{{book.author.surname}} {{book.author.name}}</span>                                            
                                            <span class="font-italic text-900" *ngIf="book.title != undefined && book.title != ''">{{book.title}}</span>,
                                            <span class="font-normal text-900 text-red-800 " *ngIf="book.editor != undefined">edited by {{book.editor.name}} {{book.editor.surname}},</span>
                                            <span class="font-normal text-900 " *ngIf="book.page != undefined && book.page != ''">pag. {{book.page}}</span>,

                                            <span class="font-normal text-900 " *ngIf="book.publisher != undefined && book.publisher != ''">{{book.publisher}}</span>,
                                            <span class="font-normal text-900 " *ngIf="book.date != undefined && book.date != ''">{{book.date}}</span>

                                        </span>

                                        <span *ngIf="book.type == 'journalArticle'">
                                            
                                            <span class="font-normal text-red-800 text-900 " *ngIf="book.author != undefined">{{book.author.surname}} {{book.author.name}}</span>, 
                                            <span class="font-normal text-900" *ngIf="book.journalArticleTitle != undefined && book.journalArticleTitle != ''">"{{book.journalArticleTitle}}"</span>,

                                            <span class="font-normal text-900" *ngIf="book.title != undefined && book.title != ''">{{book.title}}</span>,
                                            
                                            <span class="font-normal text-900 text-red-800 " *ngIf="book.editor != undefined">edited by {{book.editor.name}} {{book.editor.surname}},</span>
                                            <span class="font-normal text-900 " *ngIf="book.page != undefined && book.page != ''">pag. {{book.page}}</span>,

                                            
                                            <span class="font-normal text-900 " *ngIf="book.date != undefined && book.date != ''">{{book.date}}</span>

                                        </span>

                                        <span *ngIf="book.type == 'article'">
                                            
                                            <span class="font-normal text-red-800 text-900 " *ngIf="book.author != undefined">{{book.author.surname}} {{book.author.name}}</span>, 
                                            <span class="font-normal text-900" *ngIf="book.journalArticleTitle != undefined && book.journalArticleTitle != ''">"{{book.journalArticleTitle}}"</span>,

                                            <span class="font-normal text-900" *ngIf="book.title != undefined && book.title != ''">{{book.title}}</span>,
                                            
                                            <!-- <span class="font-normal text-900 text-red-800 " *ngIf="book.editor != undefined">edited by {{book.editor.name}} {{book.editor.surname}},</span> -->
                                            <span class="font-normal text-900 " *ngIf="book.issue != undefined && book.issue != ''">issue {{book.issue}}</span>,
                                            <span class="font-normal text-900 " *ngIf="book.date != undefined && book.date != ''">({{book.date}})</span>,

                                            <span class="font-normal text-900 " *ngIf="book.page != undefined && book.page != ''">pag. {{book.page}}</span>,
                                            

                                        </span>

                                        
                                        <!-- <span class="font-normal text-900 " *ngIf="book.issue != undefined && book.issue != ''">issue {{book.issue}}</span>

                                        <span class="font-normal text-900 " *ngIf="book.volume != undefined && book.volume != ''">vol. {{book.volume}}</span>
                                        <span class="font-normal text-900 " *ngIf="book.entry != undefined && book.entry != ''">pag. {{book.entry}}</span>
                                        <span class="font-normal text-900 " *ngIf="book.citedRangePage != undefined && book.citedRangePage != ''">{{book.citedRangePage}}</span>
                                        <span class="font-normal text-900 " *ngIf="book.citedRangeEntry != undefined && book.citedRangeEntry != ''">{{book.citedRangeEntry}}</span> -->

                                    </a>

                                </div>
                                 
                            </div>
                            <div class="flex flex-row m-2 w-full" *ngIf="loadingBibliography">
                                <p-progressSpinner class="flex flex-1"></p-progressSpinner>
                    
                            </div>
                        </div> 

                       

                        
                    </div>
                    

                   
                    
                </div>
                <div class="flex flex-row m-2 w-full" *ngIf="!textView.file">
                    <p-progressSpinner class="flex flex-1"></p-progressSpinner>
        
                </div>
            </div>
        
            <p-paginator *ngIf="(text.totalRecords != 0 && !somethingWrong) && !text.activeFile" [dropdownAppendTo]="'body'" [first]="first" [rows]="rows"
                [totalRecords]="(totalRecords | async) || 0"
                (onPageChange)="pagination($event, (text.activeTab || null), (text.activeDate || null), (text.activeLocation || null), (text.activeType || null))"
                [showJumpToPageDropdown]="true" [rowsPerPageOptions]="[8,16,32]"></p-paginator>
            
                
            <div class="m-5 flex flex-row flex-wrap flex-auto text-item-container" *ngIf="text.totalRecords == 0 && !somethingWrong">
                no entries
            </div>

            <div class="m-5 flex flex-row flex-wrap flex-auto text-item-container" *ngIf="somethingWrong">
                Something went wrong
            </div>

            <div class="m-5 flex flex-row flex-wrap flex-auto text-item-container" *ngIf="fileNotAvailable">
                File Not Found
            </div>
        </div>

</div>

